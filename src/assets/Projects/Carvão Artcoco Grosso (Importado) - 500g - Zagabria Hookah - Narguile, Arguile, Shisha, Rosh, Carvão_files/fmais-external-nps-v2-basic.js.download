var FMNPSdk={load:function(storeid,$){var tk=document.getElementById('tkwidgetloyaltytrade');if(tk!==undefined&&tk!==null){storeid=atob(tk.innerHTML);}
var jqfmpitc=setInterval(function(){try{if(typeof FMTLSdk!=='undefined'){if(FMNPSdk.isStore(storeid)){FMNPSdk.setCookie(FMNPSdk.keyStore,storeid,60);FMNPSdk.setStorage(FMNPSdk.keyStore,storeid,60);FMNPSdk.html(storeid);}
clearInterval(jqfmpitc);}}catch(e){}});try{jQuery(document).on('keyup','.mask-cpf',function(){FMNPSdk.mask(this,'cpf');});jQuery(document).on('click','#fmais-btn-response-submit',function(e){e.preventDefault();e.stopPropagation();e.stopImmediatePropagation();var model={Note:jQuery('#fmais-note-select-ok').val(),QuestionId:jQuery('#fmais-question-id-nps').val(),Justification:jQuery('#fmais-question-justification').val(),Document:jQuery('#fmais-document-response-nps').val()};if(model.QuestionId===undefined||model.QuestionId===null||model.QuestionId===''||model.QuestionId===' '){FMNPSdk.alert('Atualize a pÃ¡gina e tente novamente.');}else if(model.Note===undefined||model.Note===null||model.Note===''||model.Note===' '){FMNPSdk.alert('Selecione sua nota.');}else if(model.Justification===undefined||model.Justification===null||model.Justification===''||model.Justification===' '){FMNPSdk.alert('Descreva algo sobre sua nota.');jQuery('#fmais-question-justification').focus();}else if(model.Document===undefined||model.Document===null||model.Document===''||model.Document===' '){FMNPSdk.alert('Informe seu CPF.');jQuery('#fmais-document-response-nps').focus();}else{FMNPSdk.alert();}});jQuery(document).on('click','.fmais-btn-response-nps',function(e){e.preventDefault();e.stopPropagation();e.stopImmediatePropagation();var note=jQuery(this).data('nps-answer-id');jQuery('#fmais-note-select').html(note+' / 10');jQuery('#fmais-note-select-ok').val(note);if(!jQuery('#fmais-div-textarea').is(':visible')){jQuery('#fmais-div-textarea').slideDown();}
if(!jQuery('#fmais-document-response-nps').is(':visible')){jQuery('#fmais-document-response-nps').slideDown();}});$(document).on('click','#fmais-take-survey-button',function(e){e.preventDefault();e.stopPropagation();e.stopImmediatePropagation();if(!jQuery('#fmais-take-survey-content').is(':visible')){jQuery('#fmais-take-survey-content').slideDown(1500);}else{jQuery('#fmais-take-survey-content').slideUp(1500);}
jQuery('#fmais-note-select').html('0 / 10');jQuery('#fmais-document-response-nps').slideUp(1500);jQuery('#fmais-div-textarea').slideUp(1500);jQuery('#fmais-document-response-nps').val('');jQuery('#fmais-div-textarea').val('');jQuery('.fmais-div-note-select-alert').slideUp(1500);jQuery('#fmais-note-select-alert').html('');if(jQuery('#fmais-take-survey-button').is(':visible')){jQuery('#fmais-take-survey-button').slideUp(1500);}});$(document).on('click','.fmais-take-survey-button-internal',function(e){e.preventDefault();e.stopPropagation();e.stopImmediatePropagation();if(!jQuery('#fmais-take-survey-content').is(':visible')){jQuery('#fmais-take-survey-content').slideDown(1500);}else{jQuery('#fmais-take-survey-content').slideUp(1500);}
jQuery('#fmais-note-select').html('0 / 10');jQuery('#fmais-document-response-nps').slideUp(1500);jQuery('#fmais-div-textarea').slideUp(1500);jQuery('#fmais-document-response-nps').val('');jQuery('#fmais-div-textarea').val('');jQuery('.fmais-div-note-select-alert').slideUp(1500);jQuery('#fmais-note-select-alert').html('');if(!jQuery('#fmais-take-survey-button').is(':visible')){jQuery('#fmais-take-survey-button').slideDown(1500);}else{jQuery('#fmais-take-survey-button').slideUp(1500);}});}catch(e){console.log(e);}},alert:function(eval){jQuery('#fmais-note-select-alert').html((eval===undefined?'':eval));if(!jQuery('.fmais-div-note-select-alert').is(':visible')){jQuery('.fmais-div-note-select-alert').slideDown(1500);}else if(eval===undefined||eval===''){jQuery('.fmais-div-note-select-alert').slideUp(1500);}},isPartnerOk:function(value){try{if(value!==null&&value!==''&&value!==' '&&typeof value!=='undefined'&&value!==undefined&&value.length>0){return true;}
return false;}catch(e){return false;}},getNps:function(){var nps=FMNPSdk.getCookie(FMNPSdk.key);if(nps==='nok'){return nps;}else if(nps===false||nps==undefined||nps.indexOf('[object Object]')===0){var result=FMNPSdk.getStorage(FMNPSdk.key);if(result===false||result===null){nps='';}else{nps=result;}}
return nps;},html:function(store){if(typeof store==='undefined'){return;}
if(store==='862477e6-8a24-494c-88db-ddf5d8438a85'&&fmnps.isMobile){return;}
try{var url=FMNPSdk.getUrlCdn('plugin/apps/nps/v2/'+store+'.html');if(FMNPSdk.isValidURL(url)){if(FMNPSdk.isVtex()){if(jQuery('body').find('#fmais-iframe-external-nps').length===0){var html='<div class="container" style="margin-top: 1.5%;">';html+='       <div class="fidelizar-nps centralizado"><iframe style="border: 1px solid #EFEFEF !important;margin-bottom: 0;width: 100%;height: 500px;margin: 0 0 2% 0 !important;border: 0px;border-radius: 10px;box-shadow: 5px 5px 1px #e4e4e4 !important;" class="" id="fmais-iframe-external-nps"></iframe></div>';html+='   </div>';jQuery('footer.footer').before(html);jQuery('#fmais-iframe-external-nps').attr('src',url);}}else if(FMNPSdk.iswBuy()){if(jQuery('body').find('#fmais-iframe-external-nps').length===0){var html='<div class="container">';html+='  <div class="row">';html+='    <div class="col-md-12 text-center mb-3">';html+='       <div class="fidelizar-nps centralizado"><iframe style="border: 1px solid #EFEFEF !important;margin-bottom: 0;width: 100%;height: 500px;margin: 0 0 2% 0 !important;border: 0px;border-radius: 10px;box-shadow: 5px 5px 1px #e4e4e4 !important;" class="" id="fmais-iframe-external-nps"></iframe></div>';html+='    </div>';html+='  </div>';html+='</div>';jQuery('footer #base').before(html);jQuery('#fmais-iframe-external-nps').attr('src',url);}}else if(FMNPSdk.isTrayCorp()){if(jQuery('body').find('#fmais-iframe-external-nps').length===0){if(typeof jQuery('.desktop-footer').html()!=='undefined'){jQuery('.desktop-footer').prepend('<div class="container" style="border-top: 0px !important;"><div class="row justify-content-between align-items-center"><div class="col-sm-12"><iframe style="border: 1px solid #EFEFEF !important;margin-bottom: 0;width: 100%;height: 450px;margin: 0 0 2% 0 !important;border: 0px;border-radius: 10px;box-shadow: 5px 5px 1px #e4e4e4 !important;" class="" id="fmais-iframe-external-nps"></iframe></div></div></div>');}else{jQuery('footer.footer').prepend('<div class="container-lemoon"><div class="row justify-content-between align-items-center"><div class="col-sm-12"><iframe style="border: 1px solid #EFEFEF !important;margin-bottom: 0;width: 100%;height: 450px;margin: 0 0 2% 0 !important;border: 0px;border-radius: 10px;box-shadow: 5px 5px 1px #e4e4e4 !important;" class="" id="fmais-iframe-external-nps"></iframe></div></div></div>');}
jQuery('#fmais-iframe-external-nps').attr('src',url);}}else if(FMNPSdk.isLojaIntegrada()){if(jQuery('body').find('#fmais-iframe-external-nps').length===0){jQuery('#rodape').before('<div class="conteiner fmais-conteiner-v2" style="max-width: 1270px !important;margin: 0 auto;margin-top: 1%;margin-bottom: 1%;border-radius: 5px;"><iframe style="border: 1px solid #EFEFEF !important;margin-bottom: 25px;width: 100%;height: 450px;border: 0px;border-radius: 10px;box-shadow: 5px 5px 1px #e4e4e4 !important;" class="" id="fmais-iframe-external-nps"></iframe></div>');jQuery('#fmais-iframe-external-nps').attr('src',url);}}else if(FMNPSdk.isDoocaCommerce()){if(jQuery('body').find('#fmais-iframe-external-nps').length===0){jQuery('footer.footer').prepend('<div class="fidelizar-nps centralizado"><div class="b-xs-12 b-md-12"><div class="container"><iframe style="border: 1px solid #EFEFEF !important;margin-bottom: 0;width: 100%;height: 450px;margin: 0 0 2% 0 !important;border: 0px;border-radius: 10px;box-shadow: 5px 5px 1px #e4e4e4 !important;" class="" id="fmais-iframe-external-nps"></iframe></div></div></div>');jQuery('#fmais-iframe-external-nps').attr('src',url);}}else if(FMNPSdk.isTrayCommerce()){if(jQuery('body').find('#fmais-iframe-external-nps').length===0){jQuery('footer.footer').prepend('<div class="fidelizar-nps centralizado"><div class="b-xs-12 b-md-12"><div class="container"><iframe style="border: 1px solid #EFEFEF !important;margin-bottom: 0;width: 100%;height: 450px;margin: 0 0 2% 0 !important;border: 0px;border-radius: 10px;box-shadow: 5px 5px 1px #e4e4e4 !important;" class="" id="fmais-iframe-external-nps"></iframe></div></div></div>');jQuery('#fmais-iframe-external-nps').attr('src',url);}}else if(FMNPSdk.isNuvemShop()){if(typeof jQuery('div[data-store="footer"] .footer-main').html()!=='undefined'){if(jQuery('body').find('#fmais-iframe-external-nps').length===0){jQuery('div[data-store="footer"] .footer-main').before('<div class="container"><iframe style="border: 1px solid #EFEFEF !important;margin-bottom: 25px;width: 100%;height: 450px;border: 0px;border-radius: 10px;box-shadow: 5px 5px 1px #e4e4e4 !important;" class="" id="fmais-iframe-external-nps"></iframe></div>');jQuery('#fmais-iframe-external-nps').attr('src',url);}}else if(jQuery('body').find('#fmais-iframe-external-nps').length===0){jQuery('footer').prepend('<div class="container"><iframe style="border: 1px solid #EFEFEF !important;margin-bottom: 25px;width: 100%;height: 450px;border: 0px;border-radius: 10px;box-shadow: 5px 5px 1px #e4e4e4 !important;" class="" id="fmais-iframe-external-nps"></iframe></div>');jQuery('#fmais-iframe-external-nps').attr('src',url);}}}}catch(e){console.log(e);}},getPartnerId:function(){return atob(jQuery('#jswidgettradeid').data('partner'));},partnerEnum:{Fidelizar:0,LojaIntegrada:1,Xtech:2,WBuy:3,Bling:4,Vhsys:5,Omie:6,WooCommerce:7,Tiny:8,NuvemShop:9,Magento:10,JetNeo:11,Tray:12,Dooca:13,Eccosys:14,TrayCorp:15,Xtech1:16,BwCenter:17,Betalabs:18},partners:{wBuyId:'4835ea58-e310-4b3f-aa58-b124125b063d',LojaIntegradaId:'6f0f0d3a-6b1c-4896-af28-f6d7aeb4312f',NuvemShopId:'42b45633-ff1a-43e4-9be7-9732ae743bdd',TrayCommerceId:'a7401bee-a5e2-46c2-8ec3-3e30babe1736',TrayCorpId:'ccf300cd-de89-41c5-a4da-a2b54a7bd219',WooCommerceId:'edbbe05a-5355-45d0-b209-41c2a37b0f47',DoocaCommerceId:'f39c818d-c416-4f54-a044-7fedcbbd8ce9',JetCommerceId:'ba429e50-07de-447a-a7e9-f6d5bd54bcc9',VtexId:'584d87d3-f909-4382-8381-1ca2a49ff67c',},iswBuy:function(){return(FMNPSdk.getPartnerId()===FMNPSdk.partners.wBuyId);},isLojaIntegrada:function(){return(FMNPSdk.getPartnerId()===FMNPSdk.partners.LojaIntegradaId);},isNuvemShop:function(){return(FMNPSdk.getPartnerId()===FMNPSdk.partners.NuvemShopId);},isTrayCommerce:function(){return(FMNPSdk.getPartnerId()===FMNPSdk.partners.TrayCommerceId);},isWooCommerce:function(){return(FMNPSdk.getPartnerId()===FMNPSdk.partners.WooCommerceId);},isDoocaCommerce:function(){return(FMNPSdk.getPartnerId()===FMNPSdk.partners.DoocaCommerceId);},isJetCommerce:function(){return(FMNPSdk.getPartnerId()===FMNPSdk.partners.JetCommerceId);},isVtex:function(){return(FMNPSdk.getPartnerId()===FMNPSdk.partners.VtexId);},isTrayCorp:function(){return(FMNPSdk.getPartnerId()===FMNPSdk.partners.TrayCorpId);},getUrlCdn:function(eval){var host=window.location.hostname;switch(host){case "localhost":return 'http://localhost:49777/content/'+eval;default:return 'https://cdns.fidelizarmais.com/'+eval;}},XMLHttpRequest:(typeof XMLHttpRequest!=='undefined')?new XMLHttpRequest():new ActiveXObject('Microsoft.XMLHTTP'),isMobile:(navigator.userAgent.indexOf("Mobile")>0),isStore:function(storeid){return(storeid!==''&&storeid!==undefined)?true:false;},storeId:function(storeid){return(FMNPSdk.getStorage(FMNPSdk.keyStore)===false||FMNPSdk.getStorage(FMNPSdk.keyStore)===undefined||FMNPSdk.getStorage(FMNPSdk.keyStore)==='[object Object]')?FMNPSdk.getCookie(FMNPSdk.keyStore):FMNPSdk.getStorage(FMNPSdk.keyStore);},css:function(){var v='fm'+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);var link=FMNPSdk.getUrlSite('areas/plugin/content/css/fmais-external-nps.css?ver='+v);if(jQuery('#fmais-css-nps').length===0){jQuery('<div id="fmais-css-nps"></div><link href="'+link+'" type="text/css" rel="stylesheet" />').appendTo('head');}},getSettings:function(query,key){var settings={"async":true,"crossDomain":true,"url":FMNPSdk.urlApi(query),"method":'GET',"headers":{"api_key":key,"Access-Control-Allow-Headers":"Content-Type,x-requested-with,Authorization,Access-Control-Allow-Origin","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, POST, PUT","Accept-Language":"pt-BR,pt,en-US,en","Accept-Encoding":"gzip,br,deflate"},"dataType":'json',"contentType":"application/json; charset=utf-8"}
return settings;},getUrlSite:function(eval){var host=window.location.hostname;switch(host){case "localhost":return 'https://localhost:44313/'+eval;case "fidelizarmais.com":return 'https://fidelizarmais.com/'+eval;case "www.app.fidelizarmais.com":return 'https://homolog.fidelizarmais.com/'+eval;default:return 'https://fidelizarmais.com/'+eval;}},urlApi:function(query){var host=window.location.hostname;switch(host){case "localhost":return 'http://localhost:52961/api/v2/public/'+query;case "homolog.fidelizarmais.com":return 'https://sandbox.fidelizarmais.com/api/v2/public/'+query;case "fidelizarmais.com":return 'https://fmst.fidelizarmais.com/api/v2/public/'+query;case "fmais.xtechcommerce.com.br":return 'https://sandbox.fidelizarmais.com/api/v2/public/'+query;case "app.lojaintegrada.com.br":return 'https://sandbox.fidelizarmais.com/api/v2/public/'+query;default:return 'https://fmst.fidelizarmais.com/api/v2/public/'+query;}},setCookie:function(key,value,min){var d=new Date();d.setTime(d.getTime()+((min*24)*60));var expires="expires="+d.toUTCString();document.cookie=key+"="+value+";"+expires+";path=/";},setStorage:function(key,value,min){var expires=((new Date().getTime()+(min*24))*60);localStorage.setItem(key,JSON.stringify({"value":value,"expires":expires}));},removeCookie:function(key){var d=new Date();d.setTime(d.getTime()-(1000*60*60*24));var expires="expires="+d.toGMTString();window.document.cookie=key+"="+"; "+expires;},getCookie:function(key){var name=key+"=";var ca=document.cookie.split(';');for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==' '){c=c.substring(1);}
if(c.indexOf(name)==0){return c.substring(name.length,c.length);}}
return false;},getStorage:function(key){FMNPSdk.checkStorageExpires();var itemValue=localStorage[key];if(itemValue&&/^\{(.*?)\}$/.test(itemValue)){var current=JSON.parse(itemValue);return current.value;}
return false;},checkCookie:function(key){var obj=FMNPSdk.getCookie(key);if(obj!=""&&obj!=false){return true;}else{return false;}},checkStorage:function(key){FMNPSdk.checkStorageExpires(key);var itemValue=localStorage[key];if(itemValue&&/^\{(.*?)\}$/.test(itemValue)){var current=JSON.parse(itemValue);return current.value;}
return false;},checkStorageExpires:function(key){var toRemove=[],currentDate=new Date().getTime();for(var i=0,j=localStorage.length;i<j;i++){var current=localStorage.getItem(localStorage.key(i));if(current&&/^\{(.*?)\}$/.test(current)){current=JSON.parse(current);if(current.expires&&current.expires<=currentDate){toRemove.push(key);}}}
for(var i=toRemove.length-1;i>=0;i--){localStorage.removeItem(toRemove[i]);}},isValidURL:function(url){try{var isValid=false;jQuery.ajax({url:url,type:"get",async:false,dataType:"html",success:function(data){isValid=true;},error:function(){isValid=false;}});return isValid;}catch(e){return false;}},removeStorage:function(key){localStorage.removeItem(key);},language:function(){var language=navigator.language;if((navigator.language==undefined)&&(navigator.userLanguage!=undefined)){language=navigator.userLanguage;}
return(language==undefined||language==''||language==null||language==' '||language=='undefined')?'pt-BR':language;},anonymous:function(){return 'NzJmM2M3NTEtMGYwNC00NzlhLTkzZWItODAyOWVhZjgzZDM5';},mask:function(obj,type){switch(type){case 'tel':{obj.value=FMNPSdk.mtel(obj.value);return;}
case 'zip':{obj.value=FMNPSdk.mzip(obj.value);return;}
case 'cpf':{obj.value=FMNPSdk.mcpf(obj.value);return;}
case 'cnpj':{obj.value=FMNPSdk.mcnpj(obj.value);return;}
case 'date':{obj.value=FMNPSdk.mdate(obj.value);return;}
case 'hour':{obj.value=FMNPSdk.mhour(obj.value);return;}
case 'domain':{obj.value=FMNPSdk.mdomain(obj.value);return;}
case 'money':{obj.value=FMNPSdk.mmoney(obj.value);return;}}},mtel:function(obj){obj=obj.replace(/\D/g,"")
obj=obj.replace(/^(\d)/,"($1")
obj=obj.replace(/(.{3})(\d)/,"$1)$2")
if(obj.length==9){obj=obj.replace(/(.{1})$/,"-$1")}else if(obj.length==10){obj=obj.replace(/(.{2})$/,"-$1")}else if(obj.length==11){obj=obj.replace(/(.{3})$/,"-$1")}else if(obj.length==12){obj=obj.replace(/(.{4})$/,"-$1")}else if(obj.length>12){obj=obj.replace(/(.{4})$/,"-$1")}
return obj;},mcnpj:function(obj){obj=obj.replace(/\D/g,"")
obj=obj.replace(/^(\d{2})(\d)/,"$1.$2")
obj=obj.replace(/^(\d{2})\.(\d{3})(\d)/,"$1.$2.$3")
obj=obj.replace(/\.(\d{3})(\d)/,".$1/$2")
obj=obj.replace(/(\d{4})(\d)/,"$1-$2")
return obj},mcpf:function(obj){obj=obj.replace(/\D/g,"")
obj=obj.replace(/(\d{3})(\d)/,"$1.$2")
obj=obj.replace(/(\d{3})(\d)/,"$1.$2")
obj=obj.replace(/(\d{3})(\d{1,2})$/,"$1-$2")
return obj},mzip:function(obj){obj=obj.replace(/\D/g,"")
obj=obj.replace(/^(\d{2})(\d)/,"$1.$2")
obj=obj.replace(/\.(\d{3})(\d)/,".$1-$2")
return obj},mdate:function(obj){obj=obj.replace(/\D/g,"")
obj=obj.replace(/(\d{2})(\d)/,"$1/$2")
obj=obj.replace(/(\d{2})(\d)/,"$1/$2")
return obj;},mhour:function(obj){obj=obj.replace(/\D/g,"")
obj=obj.replace(/(\d{2})(\d)/,"$1:$2")
return obj;},mdomain:function(obj){obj=obj.replace(/^https:\/\/?/,"")
domain=obj
path=""
if(obj.indexOf("/")>-1)domain=obj.split("/")[0]
path=obj.replace(/[^\/]*/,"")
domain=domain.replace(/[^\w\.\+-:@]/g,"")
path=path.replace(/[^\w\d\+-@:\?&=%\(\)\.]/g,"")
path=path.replace(/([\?&])=/,"$1")
if(path!="")domain=domain.replace(/\.+$/,"")
obj="https://"+domain+path
return obj;},mmoney:function(obj){obj=obj.replace(/\D/g,"")
obj=obj.replace(/(\d{1})(\d{14})$/,"$1.$2")
obj=obj.replace(/(\d{1})(\d{11})$/,"$1.$2")
obj=obj.replace(/(\d{1})(\d{8})$/,"$1.$2")
obj=obj.replace(/(\d{1})(\d{5})$/,"$1.$2")
obj=obj.replace(/(\d{1})(\d{1,2})$/,"$1,$2")
return obj;},isValidEmail:function(mail){return /^(([^<>()\[\]\.,;:\s@\"]+(\.[^<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()\.,;\s@\"]+\.{0,1})+([^<>()\.,;:\s@\"]{2,}|[\d\.]+))$/.test(mail);}};FMNPSdk.key='_fm.111d449e48n77p41s29d6a6a02add7332bei';FMNPSdk.keyStore='_fm.111d449e48n77p41s2s8s9w6a6a02add7332bei';(function(window,document){'use strict';FMNPSdk.load('');})(window,document);